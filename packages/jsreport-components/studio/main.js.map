{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/main_dev.js","webpack:///./studio/NewComponentModal.js","webpack:///./studio/ComponentProperties.js","webpack:///./studio/ComponentPreview.js","webpack:///./studio/PreviewComponentToolbar.js"],"names":["Studio","addEntitySet","name","faIcon","visibleName","onNew","options","openModal","NewComponentModal","entityTreePosition","entityEditorComponentKeyResolvers","push","entity","__entitySet","key","addPropertiesComponent","ComponentProperties","title","addToolbarComponent","PreviewComponentToolbar","addPreviewComponent","ComponentPreview","getDefaultEngine","found","engines","find","e","props","nameInputRef","React","createRef","engineInputRef","state","error","processing","setTimeout","current","focus","submit","target","value","val","defaults","engine","setState","api","post","data","_id","cloning","undefined","entitySet","folderShortid","folder","shortid","message","close","openNewTab","handleKeyPress","map","color","display","marginLeft","marginRight","maxWidth","Component","onChange","v","renderEngines","FramePreview","sharedComponents","src","type","content","blob","Blob","window","URL","createObjectURL","styles","backgroundColor","isRunning","setIsRunning","stopPreviewRef","tab","previewComponent","componentShortid","componentName","startProgress","previewId","preview","componentPayload","component","helpers","dataDetails","getAllEntities","filter","d","__isLoaded","__isDirty","__isNew","length","dataJson","JSON","parse","componentUrl","resolveUrl","previewController","AbortController","abort","fetch","method","cache","headers","body","stringify","signal","then","response","contentType","get","contentPromise","status","indexOf","json","text","notOkError","stack","Error","stopProgress","updatePreview","completed","catch","err","stopPreviewComponent","handleEarlyShortcut","which","preventDefault","stopPropagation","addEventListener","removeEventListener"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = Studio;","module.exports = Studio.libraries['react'];","import NewComponentModal from './NewComponentModal'\nimport ComponentProperties from './ComponentProperties'\nimport ComponentPreview from './ComponentPreview'\nimport PreviewComponentToolbar from './PreviewComponentToolbar'\nimport Studio from 'jsreport-studio'\n\nStudio.addEntitySet({\n  name: 'components',\n  faIcon: 'fa-puzzle-piece',\n  visibleName: 'component',\n  onNew: (options) => Studio.openModal(NewComponentModal, options),\n  entityTreePosition: 800\n})\n\nStudio.entityEditorComponentKeyResolvers.push((entity) => {\n  if (entity.__entitySet === 'components') {\n    return {\n      key: 'templates',\n      entity\n    }\n  }\n})\n\nStudio.addPropertiesComponent(ComponentProperties.title, ComponentProperties, (entity) => entity.__entitySet === 'components')\nStudio.addToolbarComponent(PreviewComponentToolbar)\n\nStudio.addPreviewComponent('component', ComponentPreview)\n","/* import PropTypes from 'prop-types' */\nimport React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nfunction getDefaultEngine () {\n  const found = Studio.engines.find((e) => e === 'handlebars')\n\n  if (found) {\n    return found\n  }\n\n  return Studio.engines[0]\n}\n\nclass NewComponentModal extends Component {\n  constructor (props) {\n    super(props)\n\n    this.nameInputRef = React.createRef()\n    this.engineInputRef = React.createRef()\n\n    this.state = {\n      error: null,\n      processing: false\n    }\n  }\n\n  // the modal component for some reason after open focuses the panel itself\n  componentDidMount () {\n    setTimeout(() => this.nameInputRef.current.focus(), 0)\n  }\n\n  handleKeyPress (e) {\n    if (e.key === 'Enter') {\n      this.submit(e.target.value)\n    }\n  }\n\n  async submit (val) {\n    if (this.state.processing) {\n      return\n    }\n\n    const name = val || this.nameInputRef.current.value\n\n    const entity = {\n      ...this.props.options.defaults,\n      name,\n      engine: this.engineInputRef.current.value,\n      __entitySet: 'components'\n    }\n\n    this.setState({ processing: true })\n\n    try {\n      await Studio.api.post('/studio/validate-entity-name', {\n        data: {\n          _id: this.props.options.cloning === true ? undefined : entity._id,\n          name: name,\n          entitySet: 'components',\n          folderShortid: entity.folder != null ? entity.folder.shortid : null\n        }\n      }, true)\n    } catch (e) {\n      this.setState({\n        error: e.message,\n        processing: false\n      })\n\n      return\n    }\n\n    this.setState({\n      error: null,\n      processing: false\n    })\n\n    this.props.close()\n    Studio.openNewTab({\n      entity,\n      entitySet: 'components',\n      name\n    })\n  }\n\n  render () {\n    const { error, processing } = this.state\n\n    return (\n      <div>\n        <div className='form-group'>\n          <label>New component</label>\n        </div>\n        <div className='form-group'>\n          <label>name</label>\n          <input\n            type='text'\n            placeholder='name...'\n            ref={this.nameInputRef}\n            onKeyPress={(e) => this.handleKeyPress(e)}\n          />\n        </div>\n        <div className='form-group'>\n          <label>engine</label>\n          <select\n            defaultValue={getDefaultEngine()}\n            ref={this.engineInputRef}\n          >\n            {Studio.engines.map((e) => <option key={e} value={e}>{e}</option>)}\n          </select>\n        </div>\n        <div className='form-group'>\n          <span\n            style={{\n              color: 'red',\n              display: error ? 'block' : 'none',\n              marginLeft: 'auto',\n              marginRight: 'auto',\n              maxWidth: '360px'\n            }}\n          >\n            {error}\n          </span>\n        </div>\n        <div className='button-bar'>\n          <button className='button confirmation' disabled={processing} onClick={() => this.submit()}>Ok</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default NewComponentModal\n","/* import PropTypes from 'prop-types' */\nimport React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nexport default class ComponentProperties extends Component {\n  renderEngines () {\n    const { entity, onChange } = this.props\n\n    return (\n      <select value={entity.engine} onChange={(v) => onChange({ _id: entity._id, engine: v.target.value })}>\n        {Studio.engines.map((e) => <option key={e} value={e}>{e}</option>)}\n      </select>\n    )\n  }\n\n  static title (entity) {\n    return entity.engine\n  }\n\n  render () {\n    if (this.props.entity.__entitySet !== 'components') {\n      return <div />\n    }\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'><label>engine</label> {this.renderEngines()}</div>\n      </div>\n    )\n  }\n}\n","import { useMemo } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst FramePreview = Studio.sharedComponents.FramePreview\n\nconst ComponentPreview = (props) => {\n  const { data } = props\n\n  const src = useMemo(() => {\n    if (data.type == null && data.content == null) {\n      return null\n    }\n\n    const blob = new Blob([data.content], { type: data.type })\n    return window.URL.createObjectURL(blob)\n  }, [data.type, data.content])\n\n  const styles = useMemo(() => {\n    if (data.type !== 'text/html') {\n      return {}\n    }\n\n    // match default browser styles\n    return {\n      backgroundColor: '#fff',\n      color: '#000'\n    }\n  }, [data.type])\n\n  return (\n    <FramePreview\n      src={src}\n      styles={styles}\n    />\n  )\n}\n\nexport default ComponentPreview\n","import { useState, useRef, useCallback, useEffect } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst PreviewComponentToolbar = (props) => {\n  const [isRunning, setIsRunning] = useState(false)\n  const stopPreviewRef = useRef(null)\n  const entity = props.tab != null && props.tab.entity != null ? props.tab.entity : undefined\n\n  const previewComponent = useCallback(function previewComponent (componentShortid, componentName) {\n    if (isRunning) {\n      return\n    }\n\n    setIsRunning(true)\n    Studio.startProgress()\n\n    const previewId = Studio.preview({\n      type: 'component',\n      data: {}\n    })\n\n    const componentPayload = {\n      component: {\n        shortid: componentShortid,\n        content: entity.content || ''\n      }\n    }\n\n    if (entity.engine != null) {\n      componentPayload.component.engine = entity.engine\n    }\n\n    if (entity.helpers != null) {\n      componentPayload.component.helpers = entity.helpers\n    }\n\n    if (entity.data && entity.data.shortid) {\n      // try to fill request.data from the active open tab with sample data\n      const dataDetails = Studio.getAllEntities()\n        .filter((d) => d.shortid === entity.data.shortid && d.__entitySet === 'data' && (d.__isLoaded || d.__isDirty || d.__isNew))\n\n      if (dataDetails.length > 0) {\n        componentPayload.data = dataDetails[0].dataJson ? JSON.parse(dataDetails[0].dataJson) : {}\n      }\n    }\n\n    const componentUrl = Studio.resolveUrl('/api/component')\n\n    const previewController = new AbortController()\n\n    stopPreviewRef.current = () => {\n      previewController.abort()\n    }\n\n    window.fetch(componentUrl, {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(componentPayload),\n      signal: previewController.signal\n    }).then((response) => {\n      let contentType = ''\n\n      if (response.headers != null) {\n        contentType = response.headers.get('Content-Type') || ''\n      }\n\n      let contentPromise\n\n      if (response.status !== 200) {\n        if (contentType.indexOf('application/json') === 0) {\n          contentPromise = response.json()\n        } else {\n          contentPromise = response.text()\n        }\n      } else {\n        contentPromise = response.text()\n      }\n\n      return contentPromise.then((content) => ({\n        status: response.status,\n        content\n      }))\n    }).then(({ status, content }) => {\n      if (status !== 200) {\n        let notOkError\n\n        if (typeof content !== 'string' && content.message && content.stack) {\n          notOkError = new Error(content.message)\n          notOkError.stack = content.stack\n        } else {\n          notOkError = new Error(`Got not ok response, status: ${status}, message: ${content}`)\n        }\n\n        throw notOkError\n      }\n\n      setIsRunning(false)\n      Studio.stopProgress()\n      stopPreviewRef.current = null\n\n      Studio.updatePreview(previewId, {\n        data: {\n          type: 'text/html',\n          content\n        },\n        completed: true\n      })\n    }).catch((err) => {\n      setIsRunning(false)\n      Studio.stopProgress()\n      stopPreviewRef.current = null\n\n      Studio.updatePreview(previewId, {\n        data: {\n          type: 'text/plain',\n          content: `Component${componentName != null ? ` \"${componentName}\"` : ''} preview failed.\\n\\n${err.message}\\n${err.stack || ''}`\n        },\n        completed: true\n      })\n    })\n  }, [entity, isRunning])\n\n  const stopPreviewComponent = useCallback(function stopPreviewComponent () {\n    if (stopPreviewRef.current != null) {\n      stopPreviewRef.current()\n    }\n  })\n\n  const handleEarlyShortcut = useCallback(function handleEarlyShortcut (e) {\n    if (e.which === 120 && entity && entity.__entitySet === 'components') {\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (isRunning) {\n        stopPreviewComponent()\n      } else {\n        previewComponent(entity.shortid, entity.name)\n      }\n\n      return false\n    }\n  }, [previewComponent, isRunning, entity])\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleEarlyShortcut, true)\n\n    return () => {\n      window.removeEventListener('keydown', handleEarlyShortcut, true)\n    }\n  }, [handleEarlyShortcut])\n\n  if (!props.tab || !props.tab.entity || props.tab.entity.__entitySet !== 'components') {\n    return <span />\n  }\n\n  return (\n    <div\n      title='Run and preview component (F9)'\n      className='toolbar-button'\n      onClick={() => {\n        if (isRunning) {\n          stopPreviewComponent()\n        } else {\n          previewComponent(props.tab.entity.shortid, props.tab.entity.name)\n        }\n      }}\n    >\n      <i className={`fa fa-${isRunning ? 'stop' : 'eye'}`} />Component\n    </div>\n  )\n}\n\nexport default PreviewComponentToolbar\n"],"sourceRoot":""}